<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="../lib/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../css/bootstrap_yeti.css">
<link rel="stylesheet" type="text/css" href="../css/bootstrap-dialog.css" />
<link rel="stylesheet" type="text/css" href="../css/red.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-2.2.1.min.js"></script>
<script type="text/javascript" src='../js/jquery.form.js' ></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/bootstrap-dialog.js"></script>
<script type="text/javascript" src="../js/icheck.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script>
	$(document).ready(function() {
		// top 적용
		$('#top').load('top.html');
		
 		$('#inputId').keyup(function(){
 			var uid = $('#inputId').val();
 			
 			$.getJSON('http://localhost:3001/idCheck?uid='+uid+'&callback=?',function(resultObj){

 				if(resultObj.data == 0){
					$('#idCheckText').css('color','green').text('사용 가능한 ID 입니다.');
				} else{
					$('#idCheckText').css('color','red').text('이미 사용중인 ID 입니다.');
				}
 				
 				if(uid == "") {
 	 				$('#idCheckText').empty();
 	 			}
 				
 				$('#idCheckText').css('height','39px');
 				$('#idCheckText').css('line-height','39px');
 			});
		});
 		
 		$('input').iCheck({
	        checkboxClass: 'icheckbox_square-red',
	        radioClass: 'iradio_square-red',
	        increaseArea: '20%' // optional
		});
	});
</script>
<style type="text/css">
	body 	 { margin: 0px; }
	.dash 	 { text-align: center; height: 37px; line-height: 37px; width: 30px; padding: 0px; }
	.btn-new { background-color: #ffffff; color: #cf2d39; border: 1px solid #cccccc; float: right; }
	.legend  { padding-bottom: 10px; font-size: 35px; }
	span, legend { color: #cf2d39; }
</style>
</head>

<body>
	<!-- top -->
	<div id="top"></div>

	<div class="container">
		<div style="margin-top: 50px; text-align: center;">
			<img src="..\images\회원가입로고.png" />
		</div>
		<div style="width: 700px; height: auto; margin: 0 auto; margin-top: 50px;">
			<form class="form-horizontal" method="POST" name="joinForm" id="joinForm">
				<fieldset>
					<legend class="legend">Join a Member</legend>
					<div class="form-group">
						<label for="inputId" class="col-lg-2 control-label">
							<span>*</span>ID
						</label>
						<div class="col-lg-6">
							<input type="text" class="form-control" name="id" id="inputId"> 
						</div>
						<div class="col-lg-4" id="idCheckText"></div>
					</div>
					<div class="form-group">
						<label for="inputPassword" class="col-lg-2 control-label">
							<span>*</span>Password
						</label>
						<div class="col-lg-10">
							<input type="password" class="form-control" id="inputPassword" name="pwd">
						</div>
					</div>
					<div class="form-group">
						<label for="inputPassword" class="col-lg-2 control-label">
							<span>*</span>Password Check
						</label>
						<div class="col-lg-10">
							<input type="password" class="form-control" id="inputPassword" name="pwd2" placeholder="비밀번호 확인">
						</div>
					</div>
					<div class="form-group">
						<label for="inputEmail" class="col-lg-2 control-label">
							<span>*</span>Name
						</label>
						<div class="col-lg-10">
							<input type="text" class="form-control inputBox" id="inputEmail" name="name">
						</div>
					</div>
					<div class="form-group">
						<label class="col-lg-2 control-label">
							<span>*</span>Gender
						</label>
						<div class="col-lg-2">
							<input type="radio" value="male" name="gender" checked><label>　Male</label>
						</div>
						<div class="col-lg-2">
							<input type="radio" value="female" name="gender"><label>　Female</label>
						</div>
					</div>
					<div class="form-group">
						<label for="select" class="col-lg-2 control-label">
							<span>*</span>Date Of Birth
						</label>
						<div class="col-lg-10">
							<input type="date" class="form-control" name="birth" required>
						</div>
					</div>
					<div class="form-group">
						<label for="select" class="col-lg-2 control-label">Phone</label>
						<div class="col-lg-3">
							<input type="text" class="form-control" name="tel1"> 
						</div>
						<div class="col-lg-1 dash">─</div>
						<div class="col-lg-3">
							<input type="text" class="form-control" name="tel2"> 
						</div>
						<div class="col-lg-1 dash">─</div>
						<div class="col-lg-3">
							<input type="text" class="form-control" name="tel3"> 
						</div>
						<div>
							<input type="hidden" name="tel"> 
						</div>
					</div>
					<div class="form-group">
						<label for="inputEmail" class="col-lg-2 control-label">E-mail</label>
						<div class="col-lg-10">
							<input type="email" class="form-control" name="email" > 
						</div>
					</div>
					<hr>
					<div class="form-group">
						<div class="col-lg-12">
							<a href="javascript:void(0);" class="btn btn-danger" id="joinBtn" style="float: right;">Join</a>
							<a href="#" class="btn btn-white" style="margin: 0px 10px; float: right;">Cancel</a>
						</div>
					</div>
				</fieldset>
			</form>
		</div>
	</div>	
	<script type="text/javascript">
	// 회원가입
	$("#joinBtn").click(function() {
		$("input[name=tel]").val($("input[name=tel1]").val()+"-"+$("input[name=tel2]").val()+"-"+$("input[name=tel3]").val());
		
		if($("input[name=id]").val() == "") {
			alert("ID를 입력해 주세요.");
			joinForm.id.focus();
		} else if($("#idCheckText").html() == "이미 사용중인 ID 입니다.") {
			alert("사용 가능한 ID를 입력해 주세요.");
			joinForm.id.focus();
		}else if($("input[name=pwd]").val() == "") {
			alert("Password를 입력해 주세요.");
			joinForm.pwd.focus();
		} else if($("input[name=pwd2]").val() == "") {
			alert("Password를 확인해 주세요.");
			joinForm.pwd2.focus();
		} else if($("input[name=pwd]").val() != $("input[name=pwd2]").val()) {
			alert("Password가 일치하지 않습니다.");
			joinForm.pwd2.focus();
		} else if($("input[name=name]").val() == "") {
			alert("이름을 입력해 주세요.");
			joinForm.name.focus();
		} else if($("input[name=birth]").val() == "") {
			alert("생년월일을 입력해 주세요.");
			joinForm.birth.focus();
		} else {
	        $("#joinForm").ajaxSubmit({
				type : "POST",
				url : contextRoot + "/cosmetic/ajax/join.do",
				dataType : "json",
				success : function(resultObj) {
					if(resultObj.ajaxResult.status == 'success'){
						BootstrapDialog.show({
						    title: 'Success',
						    message: '회원가입이 완료되었습니다. 로그인 해주세요.' ,
						    buttons: [{
						        id: 'btn-ok',
						        label: 'OK',
						        cssClass: 'btn-danger', 
						        autospin: false,
						        action: function(dialogRef){    
						            dialogRef.close();
						            location.href = 'login.html';
						        }
						    }]
						});
					} else{
						BootstrapDialog.show({
						    title: 'Error',
						    message: '회원가입에 실패하였습니다.' ,
						    buttons: [{
						        id: 'btn-ok',  
						        label: 'OK',
						        cssClass: 'btn-danger', 
						        autospin: false,
						        action: function(dialogRef){    
						            dialogRef.close();
						        }
						    }]
						});
					}
				}
	        });	
		}
	});
	</script>
</body>
</html>