<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="bitcamp.java77.dao.CosmeticDao">
 	<insert id="insertReview" useGeneratedKeys="true" parameterType="cosmeticReview" keyProperty="reviewNo">
 		insert into review(mno,title,cont,vcnt,spart,stat,reg_date)
 		values(#{memberNo},#{title},#{content},0,#{sugeryPart},#{status},now())
 		<selectKey keyProperty="reviewNo" order="AFTER" resultType="int">
 			select max(rno) from review
 		</selectKey>
 	</insert>
 	
 	<insert id="insertReviewPhoto" parameterType="cosmeticReviewPhoto">
 		insert into review_phot(rno,fil_path)
 		values(#{reviewNo},#{filePath})
 	</insert>
</mapper>